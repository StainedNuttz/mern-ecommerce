(this["webpackJsonpmern-ecommerce"]=this["webpackJsonpmern-ecommerce"]||[]).push([[7],{63:function(e,t,c){"use strict";c.r(t);var n=c(18),a=c.n(n),s=c(34);function r(e,t){var c;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(c=Object(s.a)(e))||t&&e&&"number"===typeof e.length){c&&(e=c);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i=!0,l=!1;return{s:function(){c=e[Symbol.iterator]()},n:function(){var e=c.next();return i=e.done,e},e:function(e){l=!0,r=e},f:function(){try{i||null==c.return||c.return()}finally{if(l)throw r}}}}var l=c(19),o=c(2),j=c(0),d=c(20),b=c(17),u=c(7),x=(c(30),c(1)),m=function(e){var t=e.data,c=Object(j.useState)(t.inCart),n=Object(o.a)(c,2),a=n[0],s=n[1],r=Object(j.useState)(!1),l=Object(o.a)(r,2),d=l[0],b=l[1];return Object(x.jsxs)(x.Fragment,{children:[d&&Object(x.jsx)(Modal,{yes:function(){b(!1),deleteCartItem(i.id)},no:function(){return b(!1)},children:"Remove item from cart?"}),Object(x.jsxs)("tr",{className:"border-t border-b border-gray-200",children:[Object(x.jsx)("td",{className:"pl-2 py-5 text-sm",children:t.name}),Object(x.jsx)("td",{className:"".concat(t.stock>0?"text-green-500":"text-red-500"," pl-4"),children:t.stock>0?"In stock":"Out of stock"}),Object(x.jsxs)("td",{className:"",children:["\xa3".concat(t.price.toFixed(2)),Object(x.jsx)("em",{className:"ml-1 font-light text-xs",children:"each"})]}),Object(x.jsx)("td",{className:"",children:Object(x.jsxs)("div",{className:"inline-flex items-center bg-white",children:[Object(x.jsx)(u.a,{className:"p-0 py-1",onClick:function(){a-1<=0||s(a-1)},children:" - "}),Object(x.jsx)("span",{className:"px-3",children:a}),Object(x.jsx)(u.a,{className:"p-0 py-1",onClick:function(){a+1>=100||s(a+1)},children:" + "})]})}),Object(x.jsx)("td",{className:"font-bold",children:"\xa3".concat((t.price*a).toFixed(2))}),Object(x.jsx)("td",{className:"text-right pr-4",children:Object(x.jsx)(u.a,{className:"px-1 py-1",danger:!0,children:Object(x.jsx)("i",{className:"fa fa-times text-white"})})})]})]})};t.default=function(e){var t=Object(j.useState)(JSON.parse(localStorage.getItem("LOCAL_CART"))||[]),c=Object(o.a)(t,2),n=c[0],s=c[1],i=Object(j.useState)(!1),O=Object(o.a)(i,2),h=(O[0],O[1]),f=Object(j.useState)(0),p=Object(o.a)(f,2),N=p[0],y=p[1],v=Object(d.a)(),g=Object(o.a)(v,4),k=g[0],w=(g[1],g[2],g[3]);return Object(j.useEffect)((function(){(function(){var e=Object(l.a)(a.a.mark((function e(){var t,c,i,l,o,j,d,b;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(n),0!==(t=n.map((function(e){return e.id}))).length){e.next=4;break}return e.abrupt("return");case 4:return c="ids[]="+t[0],t.forEach((function(e,t){0!==t&&(c+="&ids[]="+e)})),e.prev=6,e.next=9,w("/api/products?".concat(c),"GET");case 9:i=e.sent,e.next=14;break;case 12:e.prev=12,e.t0=e.catch(6);case 14:l=[],o=0,j=r(n);try{for(b=function(){var e=d.value,t=i.products[i.products.findIndex((function(t){return t.id===e.id}))];o+=t.price*e.inCart,t&&l.push({id:t.id,inCart:e.inCart,name:t.name,price:t.price,stock:t.stock})},j.s();!(d=j.n()).done;)b()}catch(a){j.e(a)}finally{j.f()}localStorage.setItem("LOCAL_CART",JSON.stringify(l)),y(o.toFixed(2)),s(l);case 21:case"end":return e.stop()}}),e,null,[[6,12]])})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(x.jsxs)(x.Fragment,{children:[k&&Object(x.jsx)("div",{className:"flex justify-center",children:Object(x.jsx)(b.a,{})}),!k&&Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)("div",{className:"w-4/5 mx-auto",children:[Object(x.jsx)("h2",{className:"mb-4 text-4xl",children:"Your cart"}),Object(x.jsxs)("table",{className:"w-full table-fixed",children:[Object(x.jsx)("thead",{className:"",children:Object(x.jsxs)("tr",{className:"",children:[Object(x.jsx)("th",{className:""}),Object(x.jsx)("th",{className:""}),Object(x.jsx)("th",{className:""}),Object(x.jsx)("th",{className:""}),Object(x.jsx)("th",{className:"w-16"}),Object(x.jsx)("th",{className:"w-16"})]})}),Object(x.jsxs)("tbody",{children:[n.map((function(e){return Object(x.jsx)(m,{onDelete:function(){return h(!0)},data:e})})),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{}),Object(x.jsx)("td",{}),Object(x.jsx)("td",{}),Object(x.jsx)("td",{}),Object(x.jsxs)("td",{className:"py-8",children:[Object(x.jsx)("h3",{className:"text-lg tracking-wide",children:"Total"}),Object(x.jsx)("span",{className:"text-4xl font-bold",children:"\xa3".concat(N)})]}),Object(x.jsx)("td",{})]})]})]}),Object(x.jsx)("div",{className:"flex justify-end",children:Object(x.jsx)(u.a,{className:"block p-3 w-64",to:"/checkout",children:"Proceed to checkout"})})]})})]})}}}]);
//# sourceMappingURL=7.e325c78d.chunk.js.map